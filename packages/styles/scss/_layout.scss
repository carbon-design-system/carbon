//
// Copyright IBM Corp. 2023
//
// This source code is licensed under the Apache-2.0 license found in the
// LICENSE file in the root directory of this source tree.
//

@use 'sass:map';
@use 'sass:list';

@use './config' as *;
@use './utilities/custom-property';
@use './utilities/convert' as *;
@use './utilities/layout' as *;

:root {
  @each $group, $properties in $tokens {
    @each $property, $steps in $properties {
      @each $step, $value in $steps {
        @include custom-property.declaration(
          'layout-#{$group}-#{$property}-#{$step}',
          $value
        );
      }

      $min-key: list.nth(map.keys($steps), 1);
      $max-key: list.nth(map.keys($steps), -1);

      @include custom-property.declaration(
        'layout-#{$group}-#{$property}-min',
        custom-property.get-var('layout-#{$group}-#{$property}-#{$min-key}')
      );
      @include custom-property.declaration(
        'layout-#{$group}-#{$property}-min-context',
        custom-property.get-var('layout-#{$group}-#{$property}-min')
      );

      @include custom-property.declaration(
        'layout-#{$group}-#{$property}-max',
        custom-property.get-var('layout-#{$group}-#{$property}-#{$max-key}')
      );
      @include custom-property.declaration(
        'layout-#{$group}-#{$property}-max-context',
        custom-property.get-var('layout-#{$group}-#{$property}-max')
      );
    }
  }
}

@each $group, $properties in $tokens {
  @each $property, $steps in $properties {
    @each $step, $value in $steps {
      .#{$prefix}--layout--#{$group}-#{$step} {
        @include custom-property.declaration(
          'layout-#{$group}-#{$property}-context',
          custom-property.get-var(
            'layout-#{$group}-#{$property}-#{$step}',
            $value
          )
        );
      }
    }
  }
}
