import { ArgTypes, Canvas, Markdown, Meta } from '@storybook/addon-docs/blocks';
import { cdnJs } from '../../globals/internal/storybook-cdn';
import * as AccordionStories from './accordion.stories';

<Meta of={AccordionStories} />

# Accordion

[Source code](https://github.com/carbon-design-system/carbon/tree/main/packages/web-components/src/components/accordion)
&nbsp;|&nbsp;
[Usage guidelines](https://www.carbondesignsystem.com/components/accordion/usage)
&nbsp;|&nbsp;
[Accessibility](https://www.carbondesignsystem.com/components/accordion/accessibility)

## Table of Contents

- [Overview](#overview)
- [Variations](#variations)
- [Controlled](#controlled)
- [Skeleton state](#skeleton-state)
- [Component API](#component-api)
- [Accessibility](#accessibility)
- [CDN](#cdn)

## Overview

The Accordion component allows for the toggling of stacked sections of content. It is ideal for reducing vertical clutter while keeping related information organized.



<Canvas of={AccordionStories.Default} />

---

## Variations

### Alignment and Flush
* **Alignment**: Determines the position of the chevron. Use `start` or `END`.
* **Flush**: Use the `isFlush` boolean attribute to remove borders and padding.

> **Technical Detail:** Per the component logic, the `isFlush` style is automatically suppressed if `alignment="start"` is used to maintain visual integrity.

### Sizes
Accordions support `sm`, `md` (default), and `lg` sizes. Apply the `size` attribute to the `cds-accordion` container to automatically propagate it to all children.



### With Layer
Use the `WithLayer` variant when the accordion is nested within different container depths to ensure background color contrast.

<Canvas of={AccordionStories.WithLayer} />

---

## Controlled

The expansion state can be managed programmatically by toggling the `open` attribute on `cds-accordion-item`. 

<Canvas of={AccordionStories.Controlled} />

---

## Skeleton State

Use `cds-accordion-skeleton` to represent the component structure during data fetching. This state disables all pointer events and user interactions.

<Canvas of={AccordionStories.Skeleton} />

---

## Component API

### cds-accordion
<ArgTypes of="cds-accordion" />

### cds-accordion-item
<ArgTypes of="cds-accordion-item" />

#### Custom Events
| Event Name | Description |
| :--- | :--- |
| `cds-accordion-item-beingtoggled` | Dispatched before the toggle transition starts. |
| `cds-accordion-item-toggled` | Dispatched after the transition is complete. |

---

## Accessibility

The Accordion follows the W3C WAI-ARIA pattern for accordions, injecting `role="list"` on the container and `role="listitem"` on children.

### Keyboard Interaction
| Key | Action |
| :--- | :--- |
| **Space / Enter** | Toggles the focused accordion item. |
| **Tab** | Moves focus to the next/previous header. |
| **Up / Down Arrow** | Navigates focus between headers. |



---

## CDN

<Markdown>{`${cdnJs({ components: ['accordion'] })}`}</Markdown>

## Feedback

Help us improve this component by providing feedback or updating this file on [GitHub](https://github.com/carbon-design-system/carbon/edit/main/packages/web-components/src/components/accordion/accordion.mdx).
