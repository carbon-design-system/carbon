/**
 * Copyright IBM Corp.2025
 *
 * This source code is licensed under the Apache-2.0 license found in the
 * LICENSE file in the root directory of this source tree.
 */

$css--plex: true !default;
@use '@carbon/styles/scss/components/fluid-select/index';
@use '@carbon/styles/scss/layout' as *;
@use '@carbon/styles/scss/type' as *;
@use '@carbon/styles/scss/config' as *;
@use '@carbon/styles/scss/spacing' as *;
@use '@carbon/styles/scss/theme' as *;
@use '@carbon/styles/scss/components/select';
@use '@carbon/styles/scss/colors';
@use '@carbon/styles/scss/utilities/convert' as *;

$divider-width: 1px;

:host(#{$prefix}-fluid-select) {
  @extend .#{$prefix}--select--fluid;
  @extend .#{$prefix}--select--invalid;

  @include emit-layout-tokens();

  // Position the AI label and slug
  ::slotted(#{$prefix}-ai-label),
  ::slotted(#{$prefix}-slug) {
    position: absolute;
    inset-block-start: 70%;
    inset-inline-end: $spacing-09;
  }

  // Transform for non-revert-active elements
  ::slotted(#{$prefix}-ai-label:not([revert-active])),
  ::slotted(#{$prefix}-slug:not([revert-active])) {
    transform: translateY(-70%);
  }

  // AI label pseudo-elements for dividers
  ::slotted(#{$prefix}-ai-label) {
    &::before,
    &::after {
      position: absolute;
      background-color: $border-subtle-01;
      block-size: to-rem(16px);
      content: '';
      inline-size: to-rem(1px);
      inset-inline-start: calc(#{$spacing-06} - #{$divider-width});
    }

    &::before {
      display: var(--#{$prefix}-show-before);
      inset-inline-start: calc(-#{$spacing-03} - #{$divider-width});
    }
  }
}
