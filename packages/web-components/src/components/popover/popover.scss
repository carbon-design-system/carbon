/**
 * Copyright IBM Corp. 2019, 2025
 *
 * This source code is licensed under the Apache-2.0 license found in the
 * LICENSE file in the root directory of this source tree.
 */
$css--plex: true !default;

@use '@carbon/styles/scss/config' as *;
@use '@carbon/styles/scss/utilities' as *;
@use '@carbon/styles/scss/utilities/convert' as *;
@use '@carbon/styles/scss/utilities/custom-property';
@use '@carbon/styles/scss/spacing' as *;
@use '@carbon/styles/scss/theme';
@use '@carbon/styles/scss/breakpoint' as *;
@use '@carbon/styles/scss/components/popover';

// The distance between the popover container and the triggering element
// Specify the distance between the popover and the trigger. This value must
// have a unit otherwise the `calc()` expression will not work

$popover-offset: custom-property.get-var('popover-offset', 0rem);

// Customize the dimensions of the caret by specifying its width or height.
// These values will be flipped in left or right directions to have the
// correct dimensions
$popover-caret-width: custom-property.get-var('popover-caret-width', rem(12px));
$popover-caret-height: custom-property.get-var(
  'popover-caret-height',
  rem(6px)
);

// The drop shadow value used for the popover container
$popover-drop-shadow: custom-property.get-var(
  'popover-drop-shadow',
  drop-shadow(0 $spacing-01 $spacing-01 rgba(0, 0, 0, 0.2))
);

// The border value used for the popover container
$popover-border-color: custom-property.get-var(
  'popover-border-color',
  theme.$border-subtle
);

:host(#{$prefix}-tooltip),
:host(#{$prefix}-popover) {
  ::slotted(.#{$prefix}--popover--tab-tip__button) {
    @extend .#{$prefix}--popover--tab-tip__button;
  }
}

:host(#{$prefix}-tooltip[highContrast]),
:host(#{$prefix}-popover[highContrast]) {
  ::slotted(#{$prefix}-tooltip-content),
  ::slotted(#{$prefix}-popover-content) {
    @extend .#{$prefix}--popover;
  }
}

:host(
    #{$prefix}-popover-content[backgroundToken='background']:not([highContrast])
  ) {
  .#{$prefix}--popover-content {
    background: theme.$background;
  }
}

:host(
    #{$prefix}-popover-content[open][caret][backgroundToken='background']:not(
        [highContrast]
      )
  ) {
  .#{$prefix}--popover-caret {
    &::after {
      background: theme.$background;
    }
  }
}

:host(#{$prefix}-popover[tabTip][open]) {
  ::slotted(.#{$prefix}--popover--tab-tip__button) {
    background: theme.$layer !important; /* stylelint-disable-line declaration-no-important */
    box-shadow: 0 $spacing-01 $spacing-01 rgba(0, 0, 0, 0.2);
  }
}

:host(#{$prefix}-tooltip-content),
:host(#{$prefix}-popover-content) {
  @extend .#{$prefix}--popover;
}

:host(#{$prefix}-tooltip-content[open]),
:host(#{$prefix}-popover-content[open]),
:host(#{$prefix}-toggletip[open]),
:host(#{$prefix}-ai-label[open]),
:host(#{$prefix}-slug[open]) {
  .#{$prefix}--popover-content {
    display: block;
  }
}

:host(#{$prefix}-popover) {
  .#{$prefix}--popover--tab-tip__button:focus-within {
    @include focus-outline('outline');
  }
}

:host(#{$prefix}-tooltip-content[open][tabTip]),
:host(#{$prefix}-popover-content[open][tabTip]) {
  .#{$prefix}--popover-content {
    border-radius: 0;
  }
}
:host(#{$prefix}-popover[tabTip][open]) {
  ::slotted(button[class*='#{$prefix}--popover--tab-tip__button']:not(:focus)) {
    &::after {
      position: absolute;
      z-index: z('floating') + 1;
      background: theme.$layer;
      block-size: 2px;
      content: '';
      inline-size: 100%;
      inset-block-end: 0;
    }
  }
}

:host(#{$prefix}-tooltip-content[open][caret]),
:host(#{$prefix}-popover-content[open][caret]),
:host(#{$prefix}-toggletip[open]),
:host(#{$prefix}-ai-label[open]),
:host(#{$prefix}-slug[open]) {
  .#{$prefix}--popover-caret {
    display: block;

    // caret background
    &::after {
      position: absolute;
      display: block;
      background: theme.$layer;
      content: '';
    }

    // caret border
    &::before {
      position: absolute;
      display: none;
      background-color: $popover-border-color;
      content: '';
    }
  }
}

:host(#{$prefix}-tooltip-content[open][caret][highContrast]),
:host(#{$prefix}-popover-content[open][caret][highContrast]) {
  .#{$prefix}--popover-caret {
    &::after {
      background: theme.$background-inverse;
    }
  }
}

:host(#{$prefix}-tooltip-content[border]),
:host(#{$prefix}-popover-content[border]) {
  .#{$prefix}--popover-content {
    outline: 1px solid $popover-border-color;
    outline-offset: -1px;
  }
}

:host(#{$prefix}-tooltip-content[dropShadow]),
:host(#{$prefix}-popover-content[dropShadow]) {
  .#{$prefix}--popover {
    filter: $popover-drop-shadow;
  }
}

:host(#{$prefix}-tooltip-content[open][caret][border]),
:host(#{$prefix}-popover-content[open][caret][border]) {
  .#{$prefix}--popover-caret {
    &::before {
      display: block;
    }
  }
}

//-----------------------------------------------------------------------------
// Bottom
//-----------------------------------------------------------------------------

// bottom caret
:host(#{$prefix}-tooltip-content[align^='bottom']:not([autoalign])),
:host(#{$prefix}-popover-content[align^='bottom']:not([autoalign])),
:host(#{$prefix}-toggletip[alignment^='bottom']:not([autoalign])),
:host(#{$prefix}-ai-label[alignment^='bottom']:not([autoalign])),
:host(#{$prefix}-slug[alignment^='bottom']:not([autoalign])) {
  .#{$prefix}--popover-caret {
    block-size: $popover-caret-height;
    inline-size: $popover-caret-width;
    inset-block-end: 0;
    inset-inline-start: 50%;
    transform: translate(-50%, $popover-offset);

    &::after {
      block-size: $popover-caret-height;
      clip-path: polygon(0% 100%, 50% 0%, 100% 100%);
      inline-size: $popover-caret-width;
    }
  }
}

// bottom caret border
:host(#{$prefix}-tooltip-content[align^='bottom'][border]:not([autoalign])),
:host(#{$prefix}-popover-content[align^='bottom'][border]:not([autoalign])),
:host(#{$prefix}-toggletip[alignment^='bottom'][border]:not([autoalign])),
:host(#{$prefix}-ai-label[alignment^='bottom'][border]:not([autoalign])),
:host(#{$prefix}-slug[alignment^='bottom'][border]:not([autoalign])) {
  .#{$prefix}--popover-caret {
    &::before {
      block-size: $popover-caret-height;
      clip-path: polygon(0% 100%, 50% 0%, 100% 100%);
      inline-size: $popover-caret-width;
    }

    &::after {
      inline-size: calc($popover-caret-width - 1px);
      inset-block-start: 1px;
      inset-inline-start: 0.5px;
    }
  }
}

// rtl
:host(#{$prefix}-tooltip-content:dir(rtl)[align^='bottom']:not([autoalign])),
:host(#{$prefix}-popover-content:dir(rtl)[align^='bottom']:not([autoalign])),
:host(#{$prefix}-toggletip:dir(rtl)[alignment^='bottom']:not([autoalign])),
:host(#{$prefix}-ai-label:dir(rtl)[alignment^='bottom']:not([autoalign])),
:host(#{$prefix}-slug:dir(rtl)[alignment^='bottom']:not([autoalign])) {
  .#{$prefix}--popover-caret {
    transform: translate(50%, $popover-offset);
  }
}

:host(#{$prefix}-ai-label[alignment^='bottom']:not([autoalign]))
  .#{$prefix}--popover-caret,
:host(#{$prefix}-slug[alignment^='bottom']:not([autoalign]))
  .#{$prefix}--popover-caret {
  clip-path: none;
}

:host(#{$prefix}-tooltip-content[align='bottom']:not([autoalign])),
:host(#{$prefix}-popover-content[align='bottom']:not([autoalign])),
:host(#{$prefix}-toggletip[alignment='bottom']:not([autoalign])),
:host(#{$prefix}-ai-label[alignment='bottom']:not([autoalign])),
:host(#{$prefix}-slug[alignment='bottom']:not([autoalign])) {
  .#{$prefix}--popover-content {
    inset-block-end: 0;
    inset-inline-start: 50%;
    transform: translate(-50%, calc(100% + $popover-offset));
  }
}

// rtl
:host(#{$prefix}-tooltip-content:dir(rtl)[align='bottom']:not([autoalign])),
:host(#{$prefix}-popover-content:dir(rtl)[align='bottom']:not([autoalign])),
:host(#{$prefix}-toggletip:dir(rtl)[alignment='bottom']:not([autoalign])),
:host(#{$prefix}-ai-label:dir(rtl)[alignment='bottom']:not([autoalign])),
:host(#{$prefix}-slug:dir(rtl)[alignment='bottom']:not([autoalign])) {
  .#{$prefix}--popover-content {
    transform: translate(50%, calc(100% + $popover-offset));
  }
}

:host(#{$prefix}-tooltip-content[align='bottom-left']:not([autoalign])),
:host(#{$prefix}-popover-content[align='bottom-left']:not([autoalign])),
:host(#{$prefix}-toggletip[alignment='bottom-left']:not([autoalign])),
:host(#{$prefix}-ai-label[alignment='bottom-left']:not([autoalign])),
:host(#{$prefix}-slug[alignment='bottom-left']:not([autoalign])),
:host(#{$prefix}-tooltip-content[align='bottom-start']:not([autoalign])),
:host(#{$prefix}-popover-content[align='bottom-start']:not([autoalign])),
:host(#{$prefix}-toggletip[alignment='bottom-start']:not([autoalign])),
:host(#{$prefix}-ai-label[alignment='bottom-start']:not([autoalign])),
:host(#{$prefix}-slug[alignment='bottom-start']:not([autoalign])) {
  .#{$prefix}--popover-content {
    inset-block-end: 0;
    inset-inline-start: 0;
    transform: translate(
      calc(-1 * $popover-offset),
      calc(100% + $popover-offset)
    );
  }
}

// rtl
:host(
    #{$prefix}-tooltip-content:dir(rtl)[align='bottom-left']:not([autoalign])
  ),
:host(
    #{$prefix}-popover-content:dir(rtl)[align='bottom-left']:not([autoalign])
  ),
:host(#{$prefix}-toggletip:dir(rtl)[alignment='bottom-left']:not([autoalign])),
:host(#{$prefix}-ai-label:dir(rtl)[alignment='bottom-left']:not([autoalign])),
:host(#{$prefix}-slug:dir(rtl)[alignment='bottom-left']:not([autoalign])),
:host(
    #{$prefix}-tooltip-content:dir(rtl)[align='bottom-start']:not([autoalign])
  ),
:host(
    #{$prefix}-popover-content:dir(rtl)[align='bottom-start']:not([autoalign])
  ),
:host(#{$prefix}-toggletip:dir(rtl)[alignment='bottom-start']:not([autoalign])),
:host(#{$prefix}-ai-label:dir(rtl)[alignment='bottom-start']:not([autoalign])),
:host(#{$prefix}-slug:dir(rtl)[alignment='bottom-start']:not([autoalign])) {
  .#{$prefix}--popover-content {
    inset-inline-end: 0;
    inset-inline-start: initial;
  }
}

:host(#{$prefix}-tooltip-content[align='bottom-right']:not([autoalign])),
:host(#{$prefix}-popover-content[align='bottom-right']:not([autoalign])),
:host(#{$prefix}-toggletip[alignment='bottom-right']:not([autoalign])),
:host(#{$prefix}-ai-label[alignment='bottom-right']:not([autoalign])),
:host(#{$prefix}-slug[alignment='bottom-right']:not([autoalign])),
:host(#{$prefix}-tooltip-content[align='bottom-end']:not([autoalign])),
:host(#{$prefix}-popover-content[align='bottom-end']:not([autoalign])),
:host(#{$prefix}-toggletip[alignment='bottom-end']:not([autoalign])),
:host(#{$prefix}-ai-label[alignment='bottom-end']:not([autoalign])),
:host(#{$prefix}-slug[alignment='bottom-end']:not([autoalign])) {
  .#{$prefix}--popover-content {
    inset-block-end: 0;
    inset-inline-end: 0;
    transform: translate($popover-offset, calc(100% + $popover-offset));
  }
}

// rtl
:host(
    #{$prefix}-tooltip-content:dir(rtl)[align='bottom-right']:not([autoalign])
  ),
:host(
    #{$prefix}-popover-content:dir(rtl)[align='bottom-right']:not([autoalign])
  ),
:host(#{$prefix}-toggletip:dir(rtl)[alignment='bottom-right']:not([autoalign])),
:host(#{$prefix}-ai-label:dir(rtl)[alignment='bottom-right']:not([autoalign])),
:host(#{$prefix}-slug:dir(rtl)[alignment='bottom-right']:not([autoalign])),
:host(#{$prefix}-tooltip-content:dir(rtl)[align='bottom-end']:not([autoalign])),
:host(#{$prefix}-popover-content:dir(rtl)[align='bottom-end']:not([autoalign])),
:host(#{$prefix}-toggletip:dir(rtl)[alignment='bottom-end']:not([autoalign])),
:host(#{$prefix}-ai-label:dir(rtl)[alignment='bottom-end']:not([autoalign])),
:host(#{$prefix}-slug:dir(rtl)[alignment='bottom-end']:not([autoalign])) {
  .#{$prefix}--popover-content {
    inset-inline-start: 0;
  }
}

//-----------------------------------------------------------------------------
// Left
//-----------------------------------------------------------------------------

:host(#{$prefix}-tooltip-content[align^='left']:not([autoalign])),
:host(#{$prefix}-popover-content[align^='left']:not([autoalign])),
:host(#{$prefix}-toggletip[alignment^='left']:not([autoalign])),
:host(#{$prefix}-ai-label[alignment^='left']:not([autoalign])),
:host(#{$prefix}-slug[alignment^='left']:not([autoalign])) {
  .#{$prefix}--popover-caret {
    block-size: $popover-caret-width;
    inline-size: $popover-caret-height;
    inset-block-start: 50%;
    inset-inline-end: 100%;
    transform: translate(calc(-1 * $popover-offset + 100%), -50%);

    &::after {
      block-size: $popover-caret-width;
      clip-path: polygon(0% 0%, 100% 50%, 0% 100%);
      inline-size: $popover-caret-height;
    }
  }
}

// left caret border
:host(#{$prefix}-tooltip-content[align^='left'][border]:not([autoalign])),
:host(#{$prefix}-popover-content[align^='left'][border]:not([autoalign])),
:host(#{$prefix}-toggletip[alignment^='left'][border]:not([autoalign])),
:host(#{$prefix}-ai-label[alignment^='left'][border]:not([autoalign])),
:host(#{$prefix}-slug[alignment^='left'][border]:not([autoalign])) {
  .#{$prefix}--popover-caret {
    &::before {
      block-size: $popover-caret-width;
      clip-path: polygon(0% 0%, 100% 50%, 0% 100%);
      inline-size: $popover-caret-height;
    }

    &::after {
      inset-inline-start: -1px;
    }
  }
}

// rtl
:host(#{$prefix}-tooltip-content:dir(rtl)[align^='left']:not([autoalign])),
:host(#{$prefix}-popover-content:dir(rtl)[align^='left']:not([autoalign])),
:host(#{$prefix}-toggletip:dir(rtl)[alignment^='left']:not([autoalign])),
:host(#{$prefix}-ai-label:dir(rtl)[alignment^='left']:not([autoalign])),
:host(#{$prefix}-slug:dir(rtl)[alignment^='left']:not([autoalign])) {
  .#{$prefix}--popover-caret {
    inset-inline-end: initial;
    inset-inline-start: 100%;

    &::after {
      inset-inline-start: 1px;
    }
  }
}

:host(#{$prefix}-tooltip-content[align='left']:not([autoalign])),
:host(#{$prefix}-popover-content[align='left']:not([autoalign])),
:host(#{$prefix}-toggletip[alignment='left']:not([autoalign])),
:host(#{$prefix}-ai-label[alignment='left']:not([autoalign])),
:host(#{$prefix}-slug[alignment='left']:not([autoalign])) {
  .#{$prefix}--popover-content {
    inset-block-start: 50%;
    inset-inline-end: 100%;
    // Add in 0.1px to prevent rounding errors where the content is
    // moved farther than the caret
    transform: translate(calc(-1 * $popover-offset + 0.1px), -50%);
  }
}

:host(#{$prefix}-tooltip-content[align='left-bottom']:not([autoalign])),
:host(#{$prefix}-popover-content[align='left-bottom']:not([autoalign])),
:host(#{$prefix}-toggletip[alignment='left-bottom']:not([autoalign])),
:host(#{$prefix}-ai-label[alignment='left-bottom']:not([autoalign])),
:host(#{$prefix}-slug[alignment='left-bottom']:not([autoalign])),
:host(#{$prefix}-tooltip-content[align='left-end']:not([autoalign])),
:host(#{$prefix}-popover-content[align='left-end']:not([autoalign])),
:host(#{$prefix}-toggletip[alignment='left-end']:not([autoalign])),
:host(#{$prefix}-ai-label[alignment='left-end']:not([autoalign])),
:host(#{$prefix}-slug[alignment='left-end']:not([autoalign])) {
  .#{$prefix}--popover-content {
    inset-block-end: 50%;
    inset-inline-end: 100%;
    // Add in 0.1px to prevent rounding errors where the content is
    // moved farther than the caret
    transform: translate(
      calc(-1 * $popover-offset),
      calc(0.5 * $popover-offset + $spacing-05)
    );
  }
}

:host(#{$prefix}-tooltip-content[align='left-top']:not([autoalign])),
:host(#{$prefix}-popover-content[align='left-top']:not([autoalign])),
:host(#{$prefix}-toggletip[alignment='left-top']:not([autoalign])),
:host(#{$prefix}-ai-label[alignment='left-top']:not([autoalign])),
:host(#{$prefix}-slug[alignment='left-top']:not([autoalign])),
:host(#{$prefix}-tooltip-content[align='left-start']:not([autoalign])),
:host(#{$prefix}-popover-content[align='left-start']:not([autoalign])),
:host(#{$prefix}-toggletip[alignment='left-start']:not([autoalign])),
:host(#{$prefix}-ai-label[alignment='left-start']:not([autoalign])),
:host(#{$prefix}-slug[alignment='left-start']:not([autoalign])) {
  .#{$prefix}--popover-content {
    inset-block-start: 50%;
    inset-inline-end: 100%;
    // Add in 0.1px to prevent rounding errors where the content is
    // moved farther than the caret
    transform: translate(
      calc(-1 * $popover-offset),
      calc(-1 * 0.5 * $popover-offset - $spacing-05)
    );
  }
}

// rtl
:host(#{$prefix}-tooltip-content:dir(rtl)[align^='left']:not([autoalign])),
:host(#{$prefix}-popover-content:dir(rtl)[align^='left']:not([autoalign])),
:host(#{$prefix}-toggletip:dir(rtl)[alignment^='left']:not([autoalign])),
:host(#{$prefix}-ai-label:dir(rtl)[alignment^='left']:not([autoalign])),
:host(#{$prefix}-slug:dir(rtl)[alignment^='left']:not([autoalign])) {
  .#{$prefix}--popover-content {
    inset-inline-end: initial;
    inset-inline-start: 100%;
  }
}

//-----------------------------------------------------------------------------
// Right
//-----------------------------------------------------------------------------

// right caret
:host(#{$prefix}-tooltip-content[align^='right']:not([autoalign])),
:host(#{$prefix}-popover-content[align^='right']:not([autoalign])),
:host(#{$prefix}-toggletip[alignment^='right']:not([autoalign])),
:host(#{$prefix}-ai-label[alignment^='right']:not([autoalign])),
:host(#{$prefix}-slug[alignment^='right']:not([autoalign])) {
  .#{$prefix}--popover-caret {
    block-size: $popover-caret-width;
    inline-size: $popover-caret-height;
    inset-block-start: 50%;
    inset-inline-start: 100%;
    transform: translate(calc($popover-offset - 100%), -50%);

    &::after {
      block-size: $popover-caret-width;
      clip-path: polygon(0% 50%, 100% 0%, 100% 100%);
      inline-size: $popover-caret-height;
    }
  }
}

// right caret border
:host(#{$prefix}-tooltip-content[align^='right'][border]:not([autoalign])),
:host(#{$prefix}-popover-content[align^='right'][border]:not([autoalign])),
:host(#{$prefix}-toggletip[alignment^='right'][border]:not([autoalign])),
:host(#{$prefix}-ai-label[alignment^='right'][border]:not([autoalign])),
:host(#{$prefix}-slug[alignment^='right'][border]:not([autoalign])) {
  .#{$prefix}--popover-caret {
    &::before {
      block-size: $popover-caret-width;
      clip-path: polygon(0% 50%, 100% 0%, 100% 100%);
      inline-size: $popover-caret-height;
    }

    &::after {
      inset-inline-start: 1px;
    }
  }
}

// rtl
:host(#{$prefix}-tooltip-content:dir(rtl)[align^='right']:not([autoalign])),
:host(#{$prefix}-popover-content:dir(rtl)[align^='right']:not([autoalign])),
:host(#{$prefix}-toggletip:dir(rtl)[alignment^='right']:not([autoalign])),
:host(#{$prefix}-ai-label:dir(rtl)[alignment^='right']:not([autoalign])),
:host(#{$prefix}-slug:dir(rtl)[alignment^='right']:not([autoalign])) {
  .#{$prefix}--popover-caret {
    inset-inline-end: 100%;
    inset-inline-start: initial;

    &::after {
      inset-inline-start: -1px;
    }
  }
}

:host(#{$prefix}-tooltip-content[align='right']:not([autoalign])),
:host(#{$prefix}-popover-content[align='right']:not([autoalign])),
:host(#{$prefix}-toggletip[alignment='right']:not([autoalign])),
:host(#{$prefix}-ai-label[alignment='right']:not([autoalign])),
:host(#{$prefix}-slug[alignment='right']:not([autoalign])) {
  .#{$prefix}--popover-content {
    inset-block-start: 50%;
    inset-inline-start: 100%;
    // Add in 0.1px to prevent rounding errors where the content is
    // moved farther than the caret
    transform: translate($popover-offset, -50%);
  }
}

:host(#{$prefix}-tooltip-content[align='right-bottom']:not([autoalign])),
:host(#{$prefix}-popover-content[align='right-bottom']:not([autoalign])),
:host(#{$prefix}-toggletip[alignment='right-bottom']:not([autoalign])),
:host(#{$prefix}-ai-label[alignment='right-bottom']:not([autoalign])),
:host(#{$prefix}-slug[alignment='right-bottom']:not([autoalign])),
:host(#{$prefix}-tooltip-content[align='right-end']:not([autoalign])),
:host(#{$prefix}-popover-content[align='right-end']:not([autoalign])),
:host(#{$prefix}-toggletip[alignment='right-end']:not([autoalign])),
:host(#{$prefix}-ai-label[alignment='right-end']:not([autoalign])),
:host(#{$prefix}-slug[alignment='right-end']:not([autoalign])) {
  .#{$prefix}--popover-content {
    inset-block-end: 50%;
    inset-inline-start: 100%;
    transform: translate($popover-offset, calc(0.5 * $popover-offset + 16px));
  }
}

:host(#{$prefix}-tooltip-content[align='right-top']:not([autoalign])),
:host(#{$prefix}-popover-content[align='right-top']:not([autoalign])),
:host(#{$prefix}-toggletip[alignment='right-top']:not([autoalign])),
:host(#{$prefix}-ai-label[alignment='right-top']:not([autoalign])),
:host(#{$prefix}-slug[alignment='right-top']:not([autoalign])),
:host(#{$prefix}-tooltip-content[align='right-start']:not([autoalign])),
:host(#{$prefix}-popover-content[align='right-start']:not([autoalign])),
:host(#{$prefix}-toggletip[alignment='right-start']:not([autoalign])),
:host(#{$prefix}-ai-label[alignment='right-start']:not([autoalign])),
:host(#{$prefix}-slug[alignment='right-start']:not([autoalign])) {
  .#{$prefix}--popover-content {
    inset-block-start: 50%;
    inset-inline-start: 100%;
    transform: translate(
      $popover-offset,
      calc(0.5 * $popover-offset * -1 - 16px)
    );
  }
}

// rtl
:host(#{$prefix}-tooltip-content:dir(rtl)[align^='right']:not([autoalign])),
:host(#{$prefix}-popover-content:dir(rtl)[align^='right']:not([autoalign])),
:host(#{$prefix}-toggletip:dir(rtl)[alignment^='right']:not([autoalign])),
:host(#{$prefix}-ai-label:dir(rtl)[alignment^='right']:not([autoalign])),
:host(#{$prefix}-slug:dir(rtl)[alignment^='right']:not([autoalign])) {
  .#{$prefix}--popover-content {
    inset-inline-end: 100%;
    inset-inline-start: initial;
  }
}

//-----------------------------------------------------------------------------
// Top
//-----------------------------------------------------------------------------

// top caret
:host(#{$prefix}-tooltip-content[align^='top']:not([autoalign])),
:host(#{$prefix}-popover-content[align^='top']:not([autoalign])),
:host(#{$prefix}-toggletip[alignment^='top']:not([autoalign])),
:host(#{$prefix}-ai-label[alignment^='top']:not([autoalign])),
:host(#{$prefix}-slug[alignment^='top']:not([autoalign])) {
  .#{$prefix}--popover-caret {
    block-size: $popover-caret-height;
    inline-size: $popover-caret-width;
    inset-block-start: 0;
    inset-inline-start: 50%;
    transform: translate(-50%, calc(-1 * $popover-offset));

    &::after {
      block-size: $popover-caret-height;
      clip-path: polygon(0% 0%, 50% 100%, 100% 0%);
      inline-size: $popover-caret-width;
    }
  }
}

// top caret border
:host(#{$prefix}-tooltip-content[align^='top'][border]:not([autoalign])),
:host(#{$prefix}-popover-content[align^='top'][border]:not([autoalign])),
:host(#{$prefix}-toggletip[alignment^='top'][border]:not([autoalign])),
:host(#{$prefix}-ai-label[alignment^='top'][border]:not([autoalign])),
:host(#{$prefix}-slug[alignment^='top'][border]:not([autoalign])) {
  .#{$prefix}--popover-caret {
    &::before {
      block-size: $popover-caret-height;
      clip-path: polygon(0% 0%, 50% 100%, 100% 0%);
      inline-size: $popover-caret-width;
    }

    &::after {
      inline-size: calc($popover-caret-width - 1px);
      inset-block-start: -1px;
      inset-inline-start: 0.5px;
    }
  }
}

// rtl
:host(#{$prefix}-tooltip-content:dir(rtl)[align^='top']:not([autoalign])),
:host(#{$prefix}-popover-content:dir(rtl)[align^='top']:not([autoalign])),
:host(#{$prefix}-toggletip:dir(rtl)[alignment^='top']:not([autoalign])),
:host(#{$prefix}-ai-label:dir(rtl)[alignment^='top']:not([autoalign])),
:host(#{$prefix}-slug:dir(rtl)[alignment^='top']:not([autoalign])) {
  .#{$prefix}--popover-caret {
    transform: translate(50%, calc(-1 * $popover-offset));
  }
}

:host(#{$prefix}-tooltip-content[align='top']:not([autoalign])),
:host(#{$prefix}-popover-content[align='top']:not([autoalign])),
:host(#{$prefix}-toggletip[alignment='top']:not([autoalign])),
:host(#{$prefix}-ai-label[alignment='top']:not([autoalign])),
:host(#{$prefix}-slug[alignment='top']:not([autoalign])) {
  .#{$prefix}--popover-content {
    inset-block-start: 0;
    inset-inline-start: 50%;
    transform: translate(-50%, calc(-100% - $popover-offset));
  }
}

// rtl
:host(#{$prefix}-tooltip-content:dir(rtl)[align='top']:not([autoalign])),
:host(#{$prefix}-popover-content:dir(rtl)[align='top']:not([autoalign])),
:host(#{$prefix}-toggletip:dir(rtl)[alignment='top']:not([autoalign])),
:host(#{$prefix}-ai-label:dir(rtl)[alignment='top']:not([autoalign])),
:host(#{$prefix}-slug[alignment='top']:not([autoalign])) {
  .#{$prefix}--popover-content {
    transform: translate(50%, calc(-100% - $popover-offset));
  }
}

:host(#{$prefix}-tooltip-content[align='top-left']:not([autoalign])),
:host(#{$prefix}-popover-content[align='top-left']:not([autoalign])),
:host(#{$prefix}-toggletip[alignment='top-left']:not([autoalign])),
:host(#{$prefix}-ai-label[alignment='top-left']:not([autoalign])),
:host(#{$prefix}-slug[alignment='top-left']:not([autoalign])),
:host(#{$prefix}-tooltip-content[align='top-start']:not([autoalign])),
:host(#{$prefix}-popover-content[align='top-start']:not([autoalign])),
:host(#{$prefix}-toggletip[alignment='top-start']:not([autoalign])),
:host(#{$prefix}-ai-label[alignment='top-start']:not([autoalign])),
:host(#{$prefix}-slug[alignment='top-start']:not([autoalign])) {
  .#{$prefix}--popover-content {
    inset-block-start: 0;
    inset-inline-start: 0;
    transform: translate(
      calc(-1 * $popover-offset),
      calc(-100% - $popover-offset)
    );
  }
}

// rtl
:host(#{$prefix}-tooltip-content:dir(rtl)[align='top-left']:not([autoalign])),
:host(#{$prefix}-popover-content:dir(rtl)[align='top-left']:not([autoalign])),
:host(#{$prefix}-toggletip:dir(rtl)[alignment='top-left']:not([autoalign])),
:host(#{$prefix}-ai-label:dir(rtl)[alignment='top-left']:not([autoalign])),
:host(#{$prefix}-slug[alignment='top-left']:not([autoalign])),
:host(#{$prefix}-tooltip-content:dir(rtl)[align='top-start']:not([autoalign])),
:host(#{$prefix}-popover-content:dir(rtl)[align='top-start']:not([autoalign])),
:host(#{$prefix}-toggletip:dir(rtl)[alignment='top-start']:not([autoalign])),
:host(#{$prefix}-ai-label:dir(rtl)[alignment='top-start']:not([autoalign])),
:host(#{$prefix}-slug[alignment='top-start']:not([autoalign])) {
  .#{$prefix}--popover-content {
    inset-inline-end: 0;
    inset-inline-start: initial;
  }
}

:host(#{$prefix}-tooltip-content[align='top-right']:not([autoalign])),
:host(#{$prefix}-popover-content[align='top-right']:not([autoalign])),
:host(#{$prefix}-toggletip[alignment='top-right']:not([autoalign])),
:host(#{$prefix}-ai-label[alignment='top-right']:not([autoalign])),
:host(#{$prefix}-slug[alignment='top-right']:not([autoalign])),
:host(#{$prefix}-tooltip-content[align='top-end']:not([autoalign])),
:host(#{$prefix}-popover-content[align='top-end']:not([autoalign])),
:host(#{$prefix}-toggletip[alignment='top-end']:not([autoalign])),
:host(#{$prefix}-ai-label[alignment='top-end']:not([autoalign])),
:host(#{$prefix}-slug[alignment='top-end']:not([autoalign])) {
  .#{$prefix}--popover-content {
    inset-block-start: 0;
    inset-inline-end: 0;
    transform: translate($popover-offset, calc(-100% - $popover-offset));
  }
}

// rtl
:host(#{$prefix}-tooltip-content:dir(rtl)[align='top-right']:not([autoalign])),
:host(#{$prefix}-popover-content:dir(rtl)[align='top-right']:not([autoalign])),
:host(#{$prefix}-toggletip:dir(rtl)[alignment='top-right']:not([autoalign])),
:host(#{$prefix}-ai-label:dir(rtl)[alignment='top-right']:not([autoalign])),
:host(#{$prefix}-slug[alignment='top-right']:not([autoalign])),
:host(#{$prefix}-tooltip-content:dir(rtl)[align='top-end']:not([autoalign])),
:host(#{$prefix}-popover-content:dir(rtl)[align='top-end']:not([autoalign])),
:host(#{$prefix}-toggletip:dir(rtl)[alignment='top-end']:not([autoalign])),
:host(#{$prefix}-ai-label:dir(rtl)[alignment='top-end']:not([autoalign])),
:host(#{$prefix}-slug[alignment='top-end']:not([autoalign])) {
  .#{$prefix}--popover-content {
    inset-inline-start: 0;
  }
}

:host(#{$prefix}-toggletip[autoalign]),
:host(#{$prefix}-tooltip-content[autoalign]),
:host(#{$prefix}-popover-content[autoalign]) {
  .#{$prefix}--popover-caret {
    block-size: 8px;
    inline-size: 8px;
    transform: rotate(45deg);
  }
}

:host(#{$prefix}-ai-label[autoalign]),
:host(#{$prefix}-slug[autoalign]),
:host(#{$prefix}-tooltip[autoalign]),
:host(#{$prefix}-toggletip[autoalign]),
:host(#{$prefix}-popover[autoalign]) {
  .#{$prefix}--popover-container {
    position: static;
  }
}

//-----------------------------------------------------------------------------
// AutoAlign
//-----------------------------------------------------------------------------

// autoalign caret
:host(#{$prefix}-popover-content[open][caret][autoalign]) {
  .#{$prefix}--popover-caret {
    &::before {
      block-size: 8px;
      inline-size: 8px;
    }

    &::after {
      block-size: 8px;
      inline-size: 8px;
    }
  }
}

// autoalign caret border
:host(#{$prefix}-popover-content[border][open][caret][autoalign]) {
  .#{$prefix}--popover-caret {
    &::after {
      inline-size: 7px;
    }
  }
  .#{$prefix}--popover-content[align^='top'] > .#{$prefix}--popover-caret {
    &::after {
      inset-block-start: -1px;
    }
  }

  .#{$prefix}--popover-content[align^='bottom'] > .#{$prefix}--popover-caret {
    &::after {
      inset-block-end: -1px;
      inset-inline-start: 0.5px;
    }
  }

  .#{$prefix}--popover-content[align^='left'] > .#{$prefix}--popover-caret {
    &::after {
      inset-block-start: 1px;
    }
  }

  .#{$prefix}--popover-content[align^='right'] > .#{$prefix}--popover-caret {
    &::after {
      inset-block-start: -1px;
      inset-inline-end: 0.5px;
    }
  }
}
