name: Add To Merge Queue
on:
  pull_request:
    types: [labeled]

env:
  LABEL_READY_TO_MERGE: 'status: ready to merge ðŸŽ‰'
  LABEL_ENABLE_AUTOMERGE: 'status: enable automerge ðŸŸ '

jobs:
  add-to-merge-queue:
    name: Add the PR to the merge queue
    runs-on: ubuntu-latest
    steps:
      - name: 'Add to merge queue if either of the automerge labels are added'
        if:
          ${{ contains(github.event.issue.labels.*.name,
          env.LABEL_READY_TO_MERGE) ||
          contains(github.event.issue.labels.*.name, env.LABEL_ENABLE_AUTOMERGE)
          }}
        run: gh pr merge
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
