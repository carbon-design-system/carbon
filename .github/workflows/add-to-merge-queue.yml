name: Add To Merge Queue
on:
  pull_request:
    types: [labeled, opened, reopened]

jobs:
  add-to-merge-queue:
    name:
      Add to Merge Queue if the PR is labelled with any of the automerge labels
    runs-on: ubuntu-latest
    if:
      "${{ contains(github.event.issue.labels.*.name, 'status: ready to merge
      ðŸŽ‰') || contains(github.event.issue.labels.*.name, 'status: enable
      automerge ðŸŸ ')}}"
    steps:
      - name: 'Add the PR to the merge queue via the GitHub CLI'
        run: gh pr merge
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
